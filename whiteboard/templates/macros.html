{% macro nav_link(destination, caption, print_condition=True, title='') %}
    {% if print_condition %}
        <li>
            {% set destination_is_endpoint = '/' not in destination  %}
            <a {% if destination_is_endpoint and destination == request.endpoint %}
                class="active-page"
            {% endif %}
            {% if destination_is_endpoint %}
                href="{{ url_for(destination) }}"
            {% else %}
                href="{{ destination }}"
            {% endif %}
            {% if title %}
                title="{{ title }}"
            {% endif %}
            >{{ caption }}</a>
        </li>
    {% endif %}
{% endmacro %}

{% macro action_links(heading_level, print_condition=True) %}
    {% if print_condition %}
        {% if not admin_only or (admin_only and current_user.is_teacher) %}
            <nav class="actions">
                <header><{{ heading_level }}>Actions</{{ heading_level }}></header>
                <ul>
                    {{ caller() }}
                </ul>
            </nav>
        {% endif %}
    {% endif %}
{% endmacro %}

{% macro get_csrf_token() %}
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
{% endmacro %}

{% macro print_user(user, class='') %}
    <li class="{% if class %}{{ class }} {% endif %}card">
        <a href="{{ url_for('root.user_info', user_id=user.id) }}">{{ user }}</a>
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </li>
{% endmacro %}

{% macro print_form(form, method, action='', class='') %}
    <form {% if class %}class="{{ class }}"{% endif %} action="{{ action }}" method="{{ method }}">
        {{ form.csrf_token }}
        {% for field in form %}
            {% if field.type != 'CSRFTokenField' %}
                <div>
                    {% if field.type == 'BooleanField' %}
                        {{ field }}
                        {{ field.label }}
                    {% else %}
                        {% if field.type != 'SubmitField' %}
                            {{ field.label }}
                        {% endif %}
                        {{ field }}
                    {% endif %}
                    {% if field.errors %}
                        <ul class="messages">
                            {% for error in field.errors %}
                                <li class="error">{{ error }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            {% endif %}
        {% endfor %}
    </form>
{% endmacro %}

{% macro print_class_info(class) %}
    <p>Schedule: <strong class="emphasized">{{ class.schedule }}</strong></p>
    <p>Location: <strong class="emphasized">{{ class.location }}</strong></p>
    <p>Instructor: <strong class="emphasized">{{ class.teacher }}</strong></p>
{% endmacro %}
